## Задача

Известно расписание отправления теплохода по московскому времени (GMT+3):

+ из A в B:

```
2021-08-21 18:00:00
2021-08-21 18:30:00
2021-08-21 18:45:00
2021-08-21 19:00:00
2021-08-21 19:15:00
2021-08-21 21:00:00
```
+ из B в A:

```
2021-08-21 18:30:00
2021-08-21 18:45:00
2021-08-21 19:00:00
2021-08-21 19:15:00
2021-08-21 19:35:00
2021-08-21 21:50:00
2021-08-21 21:55:00
```

"из A в B" и "из B в A" стоимость одного билета 700р.

"из A в B и обратно в А" стоимость составного билета 1200р

Время пути в одну сторону 50 минут.

**Задача**. Сделать страницу (дизайн не имеет значения) на которой пользователь выбрав направление, время и количество 
билетов сможет посчитать итоговые значения: общую стоимость, время в пути. 


Если выбрано время "из A в B и обратно в А", то должен показаться дополнительный селект, в котором можно будет выбрать обратное время. 
Обратите внимание, что время не должно пересекаться. Это значит, что следует учитывать, что если путь из А в В был выбран в 14:00, 
то обратный путь возможен только по прибытию на место в пункт В.

## Ответ

```
const oneWayTravelTime = 50;
const costOneWayTicket = 700;
const costRoundTripticket = 1200;
const keyWordForSearch = "обратно";
const arrTimeBfromA = ["18:45", "19:00", "19:15", "19:35", "21:50", "21:55"];
const arrTimeAfromB = ["18:00", "18:30", "18:45", "19:00", "19:15", "21:00"];
```

**oneWayTravelTime** - из условия ``Время пути в одну сторону 50 минут.``.

**costOneWayTicket** - из условия ``стоимость одного билета 700р.``.

**costRoundTripticket** - из условия ``стоимость составного билета 1200``.

**keyWordForSearch** - по этому слову я буду узнавать, что пользователь выбрал билет ``из A в B и обратно в А``.

**arrTimeBfromA** - массив, который будет нужен для отображения дополнительного селекта. 
По условию ``Если выбрано время "из A в B и обратно в А", то должен показаться дополнительный селект, 
в котором можно будет выбрать обратное время.``.

**arrTimeAfromB** - массив, который нужен, если пользователь выбрал ``из A в B и обратно в А``. 
В первом селекте вместо того, чтобы отображать пути ``из A в B и из B в A``
будет отображаться только время для ``из A в B``, а во втором время для ``из В в А``.


```
let selectedRoute = selectRoute.value;
let selectedTime = selectTime.value.match(/[0-9:]/gm);
let arrivalTime = "18:50";
let price = costOneWayTicket;
let time = oneWayTravelTime;
let quantity = 1;
```

**selectedRoute** - значение от select с **id = route**. 

**selectedTime** - значение от select с **id = time**. Я получаю значение, например, **21:45(из А в В)**, но мне нужно только **21:45**, 
для этого я использую регулярное выражение.

**arrivalTime** - дефолтное время прибытия. По умолчанию выбран первый **option** с **18:00**, значит время прибытия **18:50**.

**price** - сумма билета, по умолчанию 700.

**time** - время поездки, по умолчанию 50 минут.

**quantity** - количество билетов, по умолчанию 1.

На selectRoute навешиваю обработчик события, который будет срабатывать при изменении селекта. **Value** записывается **selectedRoute**. 
Есть условие ``selectedRoute.includes(keyWordForSearch)`` в котором я проверяю, имеется ли в **selectedRoute** слово *обратно*, если да, 
то появляется дополнительный селект.
Старый селект заменяется на новый. В первом селекте вместо того, чтобы отображать пути ``из A в B и из B в A``
будет отображаться только время для ``из A в B``, а во втором время для ``из В в А``.
Затем происходит установления значения в переменные **time** и **price**. 

```
 price = costRoundTripticket; // 1200 рублей
 time = oneWayTravelTime * 2; // 50 * 2 = 100 минут
```

Тут же навешиваю обработчик события на дополнительный селект, чтобы узнать, какое время обратного пути выбрано, чтобы рассчитать, когда
обратно прибудет покупатель. 

Если условие ``selectedRoute.includes(keyWordForSearch)`` не верно:

```
price = costOneWayTicket; // 700 рублей
time = oneWayTravelTime; // 50 минут
```

На **selectTime** навешиваю обработчик события, который будет срабатывать при изменении селекта. **Value** записывается **selectedTime**. 

```
 if (selectedRoute.includes(keyWordForSearch)) {
    removeOption(document.querySelector(".select-additional"));
    addAdditionalOption(
      arrTimeBfromA,
      document.querySelector(".select-additional")
    );
  }
```

В данном условие проверяю **selectedRoute**, есть ли тут слово **обратно**. 

``removeOption(document.querySelector(".select-additional"))`` - **removeOption** - функуция, которая удаляет старые **option** из первого селекта.
Это сделано для того, чтобы не было объединения массивов. 

**addAdditionalOption** - функция, которая добавляет в новый созданный дополнительный select(с классом .select-additional) options из массива **arrTimeBfromA**. 

Если условие не верно

```
arrivalTime = getHourse(getSecond(event.target.value.match(/[0-9:]/gm)) + oneWayTravelTime * 60);
```

**arrivalTime** - время прибытия. getHourse - функция, которая позволяет из секунд получить время в формате (hh:mm).

## Как запустить

**Посмотреть можно тут: https://irinrer.github.io/Nevatrip_JS2/**

Или вы можете запустить у себя.

1. Клонируете репозиторий
``git clone https://github.com/IrinRer/Nevatrip_JS2.git``

2. Запускаете на вашем устройстве, например с помощью Live server


